import streamlit as st
import pandas as pd

# --- ç¶²é é…ç½® ---
st.set_page_config(page_title="å¯¶å¯å¤¢é€²åŒ–ç™¾ç§‘", page_icon="ğŸ¾", layout="centered")

# --- è‡ªå®šç¾© CSS è®“ä»‹é¢æ›´æ¼‚äº® ---
st.markdown("""
    <style>
    .main { background-color: #f5f7f9; }
    .stMetric { background-color: #ffffff; padding: 15px; border-radius: 10px; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); }
    </style>
    """, unsafe_allow_html=True)

# --- è®€å–è³‡æ–™ ---
@st.cache_data
def get_data():
    # é€™è£¡å»ºç«‹ç¯„ä¾‹è³‡æ–™ï¼Œä½ å¯ä»¥ä¹‹å¾Œæ›¿æ›æˆè®€å– CSV
    data = [
        {"åç¨±": "é¯‰é­šç‹", "åˆ†é¡": "ä¸€èˆ¬é€²åŒ–", "ç³–æœ": 400, "æ¢ä»¶": "ç„¡", "å±¬æ€§": "æ°´"},
        {"åç¨±": "å‹‡åŸºæ‹‰", "åˆ†é¡": "äº¤æ›é€²åŒ–", "ç³–æœ": 100, "æ¢ä»¶": "äº¤æ›å¾Œå¯ 0 ç³–æœé€²åŒ–", "å±¬æ€§": "è¶…èƒ½åŠ›"},
        {"åç¨±": "å¤§è”¥é´¨(ä¼½å‹’çˆ¾)", "åˆ†é¡": "ç‰¹æ®Šä»»å‹™", "ç³–æœ": 50, "æ¢ä»¶": "ä½œç‚ºå¤¥ä¼´æŠ•å‡º 10 æ¬¡ Excellent", "å±¬æ€§": "æ ¼é¬¥"},
        {"åç¨±": "ä»™å­ä¼Šå¸ƒ", "åˆ†é¡": "å¤¥ä¼´é€²åŒ–", "ç³–æœ": 25, "æ¢ä»¶": "å¤¥ä¼´å¿ƒå¿ƒé”åˆ° 70 é¡†", "å±¬æ€§": "å¦–ç²¾"},
        {"åç¨±": "é ‘çš®ç†Šè²“", "åˆ†é¡": "ç‰¹æ®Šä»»å‹™", "ç³–æœ": 50, "æ¢ä»¶": "ä½œç‚ºå¤¥ä¼´æ™‚æ•æ‰ 32 éš»æƒ¡å±¬æ€§å¯¶å¯å¤¢", "å±¬æ€§": "æ ¼é¬¥"},
        {"åç¨±": "ä¼Šå¸ƒ(å†°ä¼Šå¸ƒ)", "åˆ†é¡": "é“å…·/ç’°å¢ƒ", "ç³–æœ": 25, "æ¢ä»¶": "åœ¨å†°å¯’èª˜é¤Œæ¨¡çµ„é™„è¿‘", "å±¬æ€§": "å†°"}
    ]
    return pd.DataFrame(data)

df = get_data()

# --- æ¨™é¡Œå€ ---
st.title("ğŸ›¡ï¸ å¯¶å¯å¤¢é€²åŒ–ç‰¹æ®Šæ¢ä»¶ç´¢å¼•")
st.caption("é€™æ˜¯ä¸€å€‹å°ˆé–€ç‚ºè¨“ç·´å®¶è¨­è¨ˆçš„å·¥å…·ï¼Œå¿«é€ŸæŸ¥è©¢å„ç¨®éå‚³çµ±å‡ç´šæ–¹å¼ã€‚")

# --- æœå°‹åŠŸèƒ½ ---
search_name = st.text_input("ğŸ” è¼¸å…¥å¯¶å¯å¤¢åç¨±ï¼ˆä¾‹å¦‚ï¼šä¼Šå¸ƒã€é¯‰é­šç‹ï¼‰", "")

# --- åˆ†é ç³»çµ± ---
tab1, tab2 = st.tabs(["ğŸ“‹ å…¨éƒ¨æ¸…å–®", "ğŸ“Š çµ±è¨ˆåˆ†æ"])

with tab1:
    # æ ¹æ“šæœå°‹éæ¿¾è³‡æ–™
    filtered_df = df[df["åç¨±"].str.contains(search_name)] if search_name else df
    
    # ä½¿ç”¨è¿´åœˆç”¢ç”Ÿæ¼‚äº®çš„è³‡è¨Šå¡ç‰‡
    for index, row in filtered_df.iterrows():
        with st.expander(f"**{row['åç¨±']}** ({row['åˆ†é¡']})"):
            col1, col2, col3 = st.columns(3)
            col1.metric("æ‰€éœ€ç³–æœ", f"ğŸ¬ {row['ç³–æœ']}")
            col2.write(f"**å±¬æ€§ï¼š** {row['å±¬æ€§']}")
            col3.write(f"**è©³ç´°æ¢ä»¶ï¼š**\n{row['æ¢ä»¶']}")

with tab2:
    st.subheader("ç³–æœæ¶ˆè€—é‡æ¦‚æ³")
    # ç°¡å–®çš„çµ±è¨ˆåœ–è¡¨
    st.bar_chart(df.set_index("åç¨±")["ç³–æœ"])

# --- å´é‚Šæ¬„è³‡è¨Š ---
st.sidebar.header("é—œæ–¼æ­¤å°ˆæ¡ˆ")
st.sidebar.info("è³‡æ–™ä¾†æºï¼šPokemon GO å®˜æ–¹èˆ‡ç¤¾ç¾¤æ•´ç†ã€‚å¦‚æœä½ ç™¼ç¾è³‡æ–™æœ‰èª¤ï¼Œæ­¡è¿æäº¤ Pull Requestï¼")
